<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-2">
      <% if @category %>
        <%= @category.name %>
      <% elsif @tag %>
        #<%= @tag.name %>
      <% else %>
        Explore Content
      <% end %>
    </h1>
    <p class="text-gray-600 dark:text-gray-400">Discover stories, ideas, and expertise from our community</p>
  </div>

  <!-- Search and Filters -->
  <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-8">
    <%= form_with url: posts_path, method: :get, local: true, class: "flex flex-col md:flex-row gap-4" do |f| %>
      <div class="flex-1 relative">
        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
        <%= f.text_field :search, value: params[:search], placeholder: "Search posts...", class: "w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:text-white" %>
      </div>
      <%= f.submit "Search", class: "px-6 py-3 bg-violet-600 text-white font-medium rounded-lg hover:bg-violet-700 transition-colors cursor-pointer" %>
    <% end %>
  </div>

  <!-- Posts Grid -->
  <% if @posts.any? %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      <% @posts.each do |post| %>
        <%= render 'card', post: post %>
      <% end %>
    </div>

    <!-- Pagination -->
    <div class="mt-12 flex justify-center">
      <%== pagy_nav(@pagy) if @pagy.pages > 1 %>
    </div>
  <% else %>
    <div class="text-center py-16">
      <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">No posts found</h3>
      <p class="text-gray-600 dark:text-gray-400">Try adjusting your search or filters</p>
    </div>
  <% end %>
</section>
